<section id="portfolio" class="app-background-secundario py-5 position-relative">
  <div class="container">
    <h2 class="display-5 fw-bold text-center mb-4">Portfólio</h2>

    <p class="fs-5 text-center mb-4">
      Nesta seção, apresento os projetos dos quais participei e que refletem minha experiência e habilidades como desenvolvedor. Ao clicar em cada card, um modal será exibido, proporcionando uma visualização detalhada do funcionamento de cada projeto. Cada trabalho representou uma oportunidade de aprendizado e inovação!
    </p>

    <button class="seta seta-esquerda" (click)="rolar(-1)">
      <i class="bi bi-chevron-left"></i>
    </button>

    <div #container class="portfolio-container">
      @for (item of itensPortfolio; track $index) {
        <div class="portfolio-card card rounded-4 h-100">
          <img
            id="imgCard"
            class="card-img-top rounded-top-4"
            style="max-height: 250px"
            [src]="item.urlImagem"
          />
          <div class="card-body d-flex flex-column gap-2 h-100">
            <span id="stackCard" class="d-flex gap-1">
              @for (itemStack of item.stack; track $index) {
                <img [src]="itemStack" width="35px;" />
              }
            </span>
            <h5 id="tituloCard" class="card-title mt-2">{{ item.titulo }}</h5>
            <div class="d-flex gap-2 mt-auto">
              <button
                type="button"
                (click)="itemPortfolioSelecionado = item"
                class="btn px-4 app-btn-principal"
                data-bs-toggle="modal"
                data-bs-target="#portfolioModal"
                id="btnVerProjeto"
              >
                <i class="bi bi-window-plus"></i>
                Ver projeto
              </button>
              <a
                id="urlRepositorio"
                [href]="item.urlRepositorio"
                target="_blank"
                class="btn btn-outline-light"
              >
                <i class="bi bi-github"></i>
                Repositório
              </a>
            </div>
          </div>
        </div>
      }
    </div>

    <button class="seta seta-direita" (click)="rolar(1)">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</section>

<div
  class="modal fade"
  id="portfolioModal"
  tabindex="-1"
  aria-labelledby="portfolioModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-md">
    <div class="modal-content bg-dark text-white rounded-4">
      <div class="modal-header">
        <h5 class="modal-title" id="portfolioModalLabel">{{ itemPortfolioSelecionado?.titulo }}</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Fechar"
        ></button>
      </div>
      <div class="modal-body text-center rounded-bottom-4 modal-body-customizado">
        <img
          id="portfolioModalImage"
          [src]="itemPortfolioSelecionado?.urlImagem"
          alt="Imagem do Projeto"
          class="img-fluid mb-3"
        />

        <span id="stackCard" class="d-flex justify-content-center gap-1 mb-2">
          @for (itemStack of itemPortfolioSelecionado?.stack; track $index) {
            <img [src]="itemStack" width="35px;" />
          }
        </span>

        <p>{{ itemPortfolioSelecionado?.descricao }}</p>

        <a
          id="urlRepositorio"
          [href]="itemPortfolioSelecionado?.urlRepositorio"
          target="_blank"
          class="btn btn-outline-light"
        >
          <i class="bi bi-github"></i>
          Repositório
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  .portfolio-container {
    display: flex;
    gap: 4rem;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    padding-top: 1rem;
    padding-left: 2rem;
    padding-bottom: 2rem;
  }

  .portfolio-container::-webkit-scrollbar {
    display: none;
  }

  .portfolio-card {
    flex-shrink: 0;
    width: 600px;
    height: 500px;
    scroll-snap-align: start;
    transition: transform 0.2s ease;
    transform-origin: left center;
  }

  .portfolio-card:hover {
    transform: scale(1.05);
  }

  .seta {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(0, 0, 0, 0.5);
    border: none;
    color: white;
    font-size: 1.8rem;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 10;
  }

  .seta:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }

  .seta-esquerda {
    left: 40px;
  }

  .seta-direita {
    right: 40px;
  }
</style>
